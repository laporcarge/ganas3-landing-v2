<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ganamos.co - ¬°Gana y Disfruta!</title>
  <meta name="description" content="Consult√° tu beneficio por WhatsApp y comenz√° hoy. Atenci√≥n r√°pida y soporte personalizado."/>

  <!-- Meta Pixel -->
  <script>
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){
      n.callMethod? n.callMethod.apply(n,arguments) : n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;t.src=v;
      s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)
    }(window, document, 'script', 'https://connect.facebook.net/es_LA/fbevents.js');

    fbq('init', '747470498138166'); 
    fbq('track', 'PageView');
  </script>
  <noscript>
    <img height="1" width="1" style="display:none" alt=""
         src="https://www.facebook.com/tr?id=747470498138166&ev=PageView&noscript=1"/>
  </noscript>

  <style>
    body{
      margin:0;background:#111;color:#fff;display:flex;align-items:center;justify-content:center;
      min-height:100svh;text-align:center;font-family:'Poppins',sans-serif
    }
    .hero{
      width:100%;min-height:100svh;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:20px;
      background:linear-gradient(rgba(0,0,0,.7),rgba(0,0,0,.7)),
        url('https://static.vecteezy.com/system/resources/previews/003/810/467/non_2x/casino-advertising-neon-banner-design-with-playing-cards-and-casino-chips-on-purple-background-vector.jpg') center/cover no-repeat
    }
    h1{margin:0 0 10px;font-size:clamp(1.8rem,3.5vw,2.4rem);font-weight:700;text-shadow:2px 2px 5px rgba(0,0,0,.8)}
    .highlight{font-size:clamp(1rem,2.4vw,1.15rem);margin:6px 0 0;text-shadow:2px 2px 5px rgba(0,0,0,.8)}
    .boton-wsp{
      text-decoration:none;display:inline-block;background-color:#25d366;color:#fff;padding:14px 26px;border-radius:10px;
      font-weight:700;font-size:18px;margin-top:18px;box-shadow:0 4px 15px rgba(0,0,0,.5);transition:transform .2s,background-color .3s
    }
    .boton-wsp:hover{background-color:#1da851;transform:scale(1.03)}
  </style>
</head>

<body>
  <div class="hero">
    <h1>üî• ¬°REGISTRATE Y EMPEZ√Å HOY! üî•</h1>
    <p class="highlight">Carga m√≠nima: <strong>$3000</strong></p>
    <p class="highlight">üé∞ +2000 opciones | ‚ú® Retiros r√°pidos | üéÅ Beneficios exclusivos</p>

    <a id="whatsapp-link" class="boton-wsp" target="_blank" rel="noopener noreferrer"
       href="https://wa.me/5493518761399?text=Hola%2C%20quiero%20crear%20un%20usuario!%20Mi%20nombre%20es">
      üëâ Consult√° tu beneficio por WhatsApp
    </a>
  </div>

  <script>
    // Helpers
    function getCookie(name){return(';' + document.cookie).split('; ' + name + '=').pop()?.split(';')[0]}
    function getParam(name){return new URLSearchParams(location.search).get(name)}
    function genEventId(){return 'contact-' + Date.now() + '-' + Math.random().toString(36).slice(2,8)}

    // Opcional: c√≥digo de prueba de eventos de Meta
    const TEST_EVENT_CODE = ""; // p.ej. "TEST33354"

    function sendCAPI(payload){
      try{
        const data = new Blob([JSON.stringify(payload)], { type:'application/json' });
        const ok = navigator.sendBeacon && navigator.sendBeacon('/api/conversion', data);
        if(!ok){
          fetch('/api/conversion', {
            method:'POST', headers:{'Content-Type':'application/json'}, keepalive:true, body: JSON.stringify(payload)
          }).catch(()=>{});
        }
      }catch(e){}
    }

    document.addEventListener('DOMContentLoaded', function(){
      var btn = document.getElementById('whatsapp-link');
      if(!btn) return;

      btn.addEventListener('click', function(){
        var eventId = genEventId();

        // Solo Contact
        if(typeof fbq !== 'undefined'){
          fbq('track','Contact',{ channel:'whatsapp' },{ eventID:eventId });
        }

        // CAPI con mismo event_id
        const payload = {
          event_name: 'Contact',
          event_id: eventId,
          event_source_url: location.href,
          custom_data: { channel: 'whatsapp' },
          fbp: getCookie('_fbp'),
          fbc: getCookie('_fbc') || (getParam('fbclid') ? `fb.1.${Date.now()}.${getParam('fbclid')}` : undefined),
          ...(TEST_EVENT_CODE ? { test_event_code: TEST_EVENT_CODE } : {})
        };
        sendCAPI(payload);
      });
    });
  </script>
</body>
</html>
